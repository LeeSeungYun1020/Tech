# 데이터베이스 데드락
## 개요
- 여러 트랜잭션이 각각 자신의 데이터를 lock한 상태에서 상대방 데이터에 접근하고자 교차 대기를 하여 서로 영원히 기다리는 상태

## TIP
- 발생하는 상황과 해결 방법에 초점

## 발생 상황
- 두 트랜잭션이 각각 lock을 설정하고 unlock하지 않은 상태
- 각 트랜잭션이 상대의 lock이 걸린 데이터에 접근하려는 경우
- 서로 계속 대기하여 영원히 트랜잭션이 처리되지 않는 상황 발생

## 해결 방법
- 예방: 각 트랜잭션이 실행되기 전, 필요한 데이터를 모두 lock. lock하는 데이터가 많다면 거의 모든 데이터를 lock하여 트랜잭션의 병행성을 보장하지 못할 수 있음
- 회피: 자원을 할당할 때 time stamp를 이용하여 데드락이 발생하지 않도록 회피
- 탐지/회복: 트랜잭션 실행 전에는 아무런 검사를 하지 않고, 데드락이 발생하면 탐지하여 회복